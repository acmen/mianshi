### zk 面试题
#### zookeeper 是什么？
zookeeper是一个分布式应用程序协调系统。他是集群的监管者，监控集群中各个节点的状态根据节点提交的反馈信息进行下一步合理操作。  
客户端的读请求可以被集群中的任意一台机器处理，如果读请求在节点上注册了监听器，这个监听器也是由所连接的zk机器来处理，对于写请求，这个请求会同时发给其他的zk机器并且达成一致后，请求才会返回成功。因此，随着机器的增加，读请求的吞吐量会增加，而写请求的吞吐量会下降。  
有序性是zk中非常重要的一个概念，所有的更新都是全局有序的，每个更新都有一个唯一的时间戳，这个时间戳成为zxid(zookeeper transaction id) 而读请求只会相对于更新有序，也就是读请求的返回结果会带上这个zk得最新的zxid。

#### zookeeper 提供了什么？
文件系统  
通知机制

#### zookeeper 文件系统
zk提供一个多层级的节点命名空间（节点成为znode）与文件系统不同的是这些节点的都可以设置关联的数据，而文件系统中只有文件节点可以存放数据而目录节点不可以，zk为了保证高吞吐和低延时，在内存中维护了这个树状结构的目录结构，这种特性使得zk不能用于存放大量的数据，每个节点的存放数据上线是1M。

#### 四种类型的znode 节点
1. 持久节点  客户端断开连接依然存在
2. 持久化顺序编号节点  zk给该节点进行了顺序编号
3. 临时节点  客户端断开连接删除
4. 临时顺序节点  zk给该节点进行顺序编号

#### zookeeper 通知机制
client 端会给某个znode建立一个watcher事件，当该znode发生变化，这些client就会收到通知，然后client根据变化进行相应的业务处理。

#### zookeeper 做了什么
1. 命名服务
2. 配置管理
3. 集群管理
4. 分布式锁
5. 队列管理

#### zk的命名服务（文件系统）
命名服务是指通过指定的名字来获取资源或者服务地址，利用zk创建一个全局的路径，这额个路径可以作为一个名字，指向集群中的集群，提供的服务的地址，或者一个远程的对象等。

#### zk的配置管理（文件系统、通知机制）
程序分布式的部署在不同的机器上，将程序的配置信息存放在zk的znode上，当配置发生变化的时候，也就是znode发生变化，通过watcher通知到各个客户端，从而更改配置信息。

#### zk集群管理（文件系统、通知机制）
所谓的集群管理主要是：是否有机器退出或者加入，选举master  
对于第一点，所有的机器约定在父目录下创建临时节点，并且监听父目录下的节点数据变化，如果有机器断开连接或者加入了，则都会导致父目录下子目录的变化，这时候就会通知到到客户端，实现了机器动态的增加和删除的管理。  
对于选举master 可以采用临时有序节点，选择序号最小的机器作为master等。还有其他的一些选举master的思路。

#### Zookeeper分布式锁（文件系统、通知机制）

#### 获取分布式锁的流程

#### Zookeeper队列管理（文件系统、通知机制）

#### Zookeeper数据复制

#### Zookeeper工作原理

#### zookeeper是如何保证事务的顺序一致性的？

#### Zookeeper 下 Server工作状态

#### zookeeper是如何选取主leader的？

#### Zookeeper同步流程

#### 分布式通知和协调

#### 机器中为什么会有leader？

#### zk节点宕机如何处理？

#### zookeeper负载均衡和nginx负载均衡区别

#### zookeeper watch机制

#### zookeeper 使用的协议

#### zookeeper 权限控制机制

#### zookeeper paxos 算法
