### 分布式理论
#### 一) CAP定理
##### 什么是CAP
一个分布式系统不可能同时满足一致性（C:Consistency)，可用性（A: Availability）和分区容错性（P：Partition tolerance）这三个基本需求，最多只能同时满足其中的2个。  
|选项|描述|
|:--:|:--:|
|C|一致性，指数据在多个副本之间能够保持一致（严格的一致性）|
|A|可用性 指系统提供的服务必须一直处于可用状态，每次请求都能获取到非错的响应---但是不保证数据是最新的|
|P|分区容错 分布式系统在遇得到任何网络分区故障的时候，仍然能够对外提供满足一致性和可用性的服务，除非整个网络发生瘫痪|

什么是分区?  
在分布式系统中，不同的节点分布在不同的子网络中，由于一些特殊的原因，这些子节点之间出现了网络不通的状态，但他们的内部子网络是正常的。从而导致了整个系统的环境被切分成了若干个孤立的区域。这就是分区。  

##### 为什么只能3选2
整个系统由两个节点配合组成，之间通过网络通信，当节点 A 进行更新数据库操作的时候，需要同时更新节点 B 的数据库（这是一个原子的操作）。

上面这个系统怎么满足 CAP 呢？C：当节点A更新的时候，节点B也要更新，A：必须保证两个节点都是可用的，P：当节点 A,B 出现了网络分区，必须保证对外可用。

可见，根本完成不了，只要出现了网络分区，A 就无法满足，因为节点 A 根本连接不上节点 B。如果强行满足 C 原子性，就必须停止服务运行，从而放弃可用性 C。
